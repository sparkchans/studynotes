## Linux 分区

### 磁盘的单位：

磁盘是由从上到下的圆片组成的，这些圆片叫做盘片。在盘片上根据距离圆心的远近可以划分出一道道同心圆，这个被称之为磁道。 从上到下的磁道组成一个面，叫柱面。将磁道每隔一定的弧度进行划分，叫做扇区。扇区的物理大小单位分为：512 Byte和4 KB。对 MBR 分区表来说，最小的分区单位是柱面；而对现在的 GPT 分区来说，最小的分区单位可以是扇区。

### MBR 分区表

对于 MBR 形式的分区表，磁盘的第一个扇区数据主要由两部分组成：主要开机记录（即 MBR，占用 446 Byte）和分区表（64 Byte）。而分区就是对该扇区的分区表进行划分，最多只能有 4 组记录分区，这也是 Windows 上为什么最多只能有 4 个主分区的原因。分区表的每组记录只能有 16 Byte，它记录了该分区的起始和结束的柱面号。为了能够继续划分分区，可以采用延伸分区。延伸分区采用额外的扇区来记录分区信息，延伸分区只能有一个，但是可以在上面划分出多个逻辑分区。

### GPT 分区

GPT 将所有区块用LBA（默认 512 Byte）来进行规划。

- LBA0

  这个区域的前 446 Byte 存放和 MBR 分区内容相同数据。而原本存放分区表的地方用于存放一个标志位，用于表示磁盘采用 GPT 分区。

- LBA1 

  记录分区表本身的位置和大小，同时记录备份分区表的位置，并存放分区表的校验机制码。

- LBA2-33

  每个 LBA 可以记录四组分区数据。使用 64 Byte 记录分区的起始扇区号和结束扇区号。

### 开机流程

CMOS 是记录各项硬件参数且嵌入到主板上的存储器。BIOS 是写入到主板上的一个固件。整个开机流程如下：

- BIOS：开机主动执行的固件，识别可开机的设备，比如磁盘。读取开机管理程序。
- MBR：然后读取操作系统核心文件。
- 操作系统核心文件：开始操作系统功能。