1. 要求: 请实现一个函数, 把字符串中的每个空格替换成 “%20”. 例如, 输入 “We are happy.”, 则输入 “We%20are%20happy.”

2. 分析: 通过第一次遍历字符串找出空格数量, 从而确定最终的字符串长度, 然后从后往前移动字符到正确的位置. 这里的思路和***查找数组中重复的数字***中排序的思维方式一样, 都是通过一次交换就能将字符放到正确的位置上.

3. 代码实现:

   ```java
   public String replaceSpace(StringBuffer str) {
           if (str == null) {
               return null;
           }
           if (str.length() == 0) {
               return str.toString();
           }
           // 原始长度
           int oldLen = str.length();
           // 空格数
           int blankCount = 0;
           for (int i = 0; i < oldLen; i++) {
               if (str.charAt(i) == ' ') {
                   blankCount++;
               }
           }
           if (blankCount == 0) {
               return str.toString();
           }
           // 新的长度
           int newLen = oldLen + blankCount * 2;
           str.ensureCapacity(newLen);
           for (int i = newLen; i > oldLen; i--) {
               str.append(' ');
           }
           char ch;
           for (int i = oldLen - 1, j = newLen - 1; i >= 0; i--, j--) {
               ch = str.charAt(i);
               if (ch != ' ') {
                   str.setCharAt(j, ch);
               } else {
                   str.setCharAt(j--, '0');
                   str.setCharAt(j--, '2');
                   str.setCharAt(j, '%');
               }
           }
           return str.toString();
       }
   ```

   